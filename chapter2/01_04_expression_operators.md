# 表达式和运算符

表达式即 JavaScript 中的个短语。常量、变量名、函数调用等都是表达式。

将简单表达式组合成复杂表达式最常用的方法就是使用运算符。

接下来，我们主要就是讲解 JavaScript 表达式和运算符的相关知识。

## 表达式

最简单的表达式就是“原始表达式”，它是表达式的最小单元。JavaScript 中的原始表达式包括：常量、直接量、关键字和变量，如

```
"hello world"   // 字符串
123             // 数字
1.2             // 小数
true            // 布尔值
false           // 布尔值
null            // 空
```

对象、数组的初始化表达式，如：

```
{ name: 'stone', age: 20}       // 对象
[ 1, 2, 3, 4, 5, 6, 7, 8 ]      // 数组
```

函数定义表达式，也可以称为”函数直接量“，如

```
function(){ console.log('good'); }    // 函数
```

属性访问表达式，运算结果是得到一个对象属性或数组元素值，如：

```
var o = {x:1, y:{z:3}};
var a = [0, 4];

o.y.z // 表达式o.y的z属性
o["x"] // 表达式o的x属性
a[1] // 表达式a中索引为1的元素
```

调用表达式即调用或执行函数的语法表示，如：

```
Math.max(x, y, z) // Math.max是一个函数，x, y, z是参数
```

对象创建表达式是创建一个对象并调用构造函数初始化新对象的属性，如：

```
new Object();
```

## 运算符

运算符用于算术表达式、比较表达式、逻辑表达式、赋值表达式等。大多数运算符都是由标点符合表示的，如"="。另一部分则由关键字表示，如"delete"。

### 优先级

运算符的优先级决定了表达式中运算执行的先后顺序，优先级高的运算符最先被执行。

先来看一个简单的例子：

```
3 + 5 * 4; // 23
```

由于乘法运算符比起加法运算符优先级更高，因此它会被最先执行，然后再执行加法，计算顺序是这样的：

```
5 * 4 = 20;
20 + 3 = 23;
```

**结合性**

结合性决定了拥有相同优先级的运算符的执行顺序。考虑下面这个表达式：

```
a OP b OP c  // OP表示操作符
```

左结合（从左到右计算），相当于把左边的子表达式加上小括号：

```
(a OP b) OP c
```

右结合（从右到左计算），相当于把右边的子表达式加上小括号：

```
a OP (b OP c)
```

**汇总表**

下面的表将所有运算符按照优先级的不同从高到低排列：

![](/assets/js-yxj.jpg)

### 一元运算符

只有一个操作数的运算符叫做一元运算符。

**递增递减运算符**

递增递减运算符分为：前置型（递增 `++i`，递减 `--i`）和后置型（递增 `i++`，递减 `i--`）。

前置型指的是自身先计算，再后赋值给变量；后置型指的是先将自身的值赋给变量，然后再自增1。我们来看个例子：

```
// 前置型
var i = 1;
console.log(i);  // 1
var a = ++i;
console.log(a);  // 2
console.log(i);  // 2

// 后置型
var b = i++;  
console.log(b);  // 2
console.log(i);  // 3
```

怎么理解这个例子呢？

我们先来看前置型部分。上面的例子相当于这样：

```
// 先自身加1，再赋值
var i = 1;
i = i + 1;
var a = i;
```

此时 i 已经为 2了，然后我们再看后置型部分，相当于：

```
// 此时 i = 2
// 先赋值，再自身加1
var b = i;
i = i + 1;
```

**一元加和一元减**

一元加即一个加号（+），本质上他对数组无任何影响，如：

```
var a = 10;
a = + a;
console.log(a);  // 20
```

但是，一元加对字符串却有作用，会把字符串转换成数字：

```
var a = "10";
console.log(typeof a);  // "string"
var b = +a;
console.log(typeof b);  // "number"
console.log(typeof a);  // "string"
```

上面那段代码将字符串 "10" 转换成了数字，它计算字符串的方式与 parseInt\(\) 类似。

注意，最后打印变量 a 的类型，还是 "string" ，这是由于字符串的特殊性，即它是不可变的，一旦创建就不能改变。

一元减即一个减号（-），其本质就是对数字求负值：

```
var a = 1;
a = -a;
console.log(a);  // -1
```

同样的，一元减也会把字符串转换成近似的数字，此外还会对其求负，如：

```
var a = "10";
console.log(typeof a);  // "string"
var b = - a;
console.log(typeof b);  // "number"
```

**delete**

delete 运算符用于删除对象属性或者数组元素，如果删除成功或所删除对象不存在，将返回true。如：

```
var o = {};
o.name = "cat";
console.log(o.name);  // "cat"
console.log(delete o.name);  // true
console.log(o.name);  // undefined 
console.log(delete o.age);  // true
```

注意，内置核心和客户端属性是不能被删除的。

**void**

void 运算符对任何值返回 undefined。该运算符的作用如下：

* 通过采用 `void 0` 取 `undefined` 比采用字面上的 `undefined` 更靠谱更安全，应该优先采用 `void 0` 这种方式。

* 填充 `<a>` 的 `href` 确保点击时不会产生页面跳转；填充` <image>` 的 `src`，确保不会向服务器发出垃圾请求。



